<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="ia_inherit_report_invoice_document" inherit_id="account.report_invoice_document">
            <xpath expr="//div[hasclass('page')]/h2" position="replace">
                <h2>                   
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Tax Invoice</span>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                    <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                    <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                    <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                    <span t-if="o.name != '/'" t-field="o.name"/>  
                </h2>
            </xpath>
            <xpath expr="//div[@t-field='o.partner_id']" position="replace"/>
            <xpath expr="//t[@t-set='address']" position="replace">
                <t t-set="address">
                    <t t-set="information_block">
                        <div t-field="o.commercial_partner_id"/>
                        <div t-field="o.partner_id.street"/>
                        <div t-field="o.partner_id.street2"/>
                        <div t-if="o.partner_id.city or o.partner_id.state_id or o.partner_id.zip">
                            <span t-field="o.partner_id.city"/>
                            <span t-field="o.partner_id.state_id.code"/>
                            <span t-field="o.partner_id.zip"/>
                        </div>
                        <div t-if="o.partner_id.vat" class="mt16">
                            <t t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label"
                            id="inv_tax_id_label"/>
                            <t t-else="">Tax ID</t>:
                            <span t-field="o.partner_id.vat"/>
                        </div>
                    </t>
                </t>
            </xpath>
            <xpath expr="//div[@name='reference']" position="replace">
                <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                    <strong>Purchase Order:</strong>
                    <p class="m-0" t-field="o.ref"/>
                </div>
           </xpath>
            <xpath expr="//div[hasclass('page')]" position="attributes">
                <attribute name="style">font-size: 12px;</attribute>
            </xpath>
               <xpath expr="//div[@id='informations']" position="inside">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.site_location" name="site_location">
                <strong>Site Location:</strong>
                <p class="m-0" t-field="o.site_location"/>
            </div>
        </xpath>
         <xpath expr="//table/thead/tr[1]"  position="replace">              
                <tr>
                    <th name="th_description" class="text-left"><span>Description</span></th>
                    <th name="th_quantity" class="text-right"><span>Quantity</span></th>
                    <th t-if="o.is_display_unit_price" name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Unit Price</span></th>
                    <!-- <th name="th_price_unit" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                        <span>Disc.%</span>
                    </th>
                    <th name="th_taxes" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th>
                    <th name="th_subtotal" class="text-right">
                        <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                        <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                    </th> -->
                    <th t-if="o.is_display_line_total" name="th_subtotal" class="text-right">
                        <span>Total</span>
                    </th>
                </tr>
             </xpath>
             <xpath expr="//table/tbody[hasclass('invoice_tbody')]/t[3]/tr/t[1]" position="replace">
                 <t t-if="not line.hide_in_quote">
                   <t t-if="not line.display_type" name="account_invoice_line_accountable">
                        <td name="account_invoice_line_name"><span t-field="line.name" t-options="{'widget': 'text'}"/></td>
                        <td class="text-right">
                            <span t-field="line.quantity"/>
                            <span t-field="line.product_uom_id"  groups="uom.group_uom"/>
                        </td>
                        <td t-if="o.is_display_unit_price" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                            <span class="text-nowrap" t-field="line.price_unit"/>
                        </td>
                        <!-- <td t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                            <span class="text-nowrap" t-field="line.discount"/>
                        </td>
                        <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                            <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                        </td> -->
                       <td t-if="o.is_display_line_total" class="text-right o_price_total">
                           <span class="text-nowrap" t-field="line.price_subtotal"/>
                       </td>
                    </t>
                 </t>
            </xpath>

            <xpath expr="//p[@name='payment_communication']" position="replace">
                <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication">
                    Please use the following reference for your payment : <b><span t-field="o.payment_reference"/></b>
                </p>
            </xpath>

            <xpath expr="//p[@name='comment']" position="before">
                <p>
                    <b>Bank Details</b>
                </p>
            </xpath>
    </template>

    <!-- <template id="report_invoice_document" inherit_id="sale.report_invoice_document_inherit_sale" name="Rental Template" primary="True">

        <xpath expr="//address" position="replace"/>
        <xpath expr="//t[@t-set='information_block']" position="replace">
            <t t-set="information_block"></t>
        </xpath>
        <xpath expr="//div[@t-field='o.partner_id']" position="replace"/>
        <xpath expr="//t[@t-set='address']" position="replace">
            <t t-set="address">
                <t t-set="information_block">
                    <div t-field="o.partner_id.name"/>
                    <div t-field="o.partner_id.street"/>
                    <div t-field="o.partner_id.street2"/>
                    <div t-if="o.partner_id.city or o.partner_id.state_id or o.partner_id.zip">
                        <span t-field="o.partner_id.city"/>
                        <span t-field="o.partner_id.state_id.code"/>
                        <span t-field="o.partner_id.zip"/>
                    </div>
                    <div t-if="o.partner_id.vat" class="mt16">
                        <t t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label"
                           id="inv_tax_id_label"/>
                        <t t-else="">Tax ID</t>:
                        <span t-field="o.partner_id.vat"/>
                    </div>
                </t>
            </t>
        </xpath> -->
        <!-- <xpath expr="//h2" position="replace">
            <div>
                Tax Invoice
                <span t-field="o.name"/>
            </div>
        </xpath> -->
        <!-- <xpath expr="//div[@name='reference']" position="replace">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                <strong>Purchase Order:</strong>
                <p class="m-0" t-field="o.ref"/>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('page')]" position="attributes">
            <attribute name="style">font-size: 12px;</attribute>
        </xpath>
        <xpath expr="//div[@id='informations']" position="inside">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.site_location" name="site_location">
                <strong>Site Location:</strong>
                <p class="m-0" t-field="o.site_location"/>
            </div>
        </xpath>
        <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_quantity']" position="after">
            <th name="th_duration_days" class="text-right"><span>Days</span></th>
        </xpath>
        <xpath expr="//table/tbody[hasclass('invoice_tbody')]//t[@t-foreach='lines']/tr/t[1]" position="replace">
            <t t-if="not line.hide_in_quote">
                <t t-if="not line.display_type" name="account_invoice_line_accountable">
                    <td name="account_invoice_line_name">
                        <span t-esc="line.get_rental_order_line_description()" t-options="{'widget': 'text'}"/>
                    </td>
                    <td class="text-right">
                        <span t-field="line.quantity"/>
                        <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                    </td>
                    <td class="text-right" name="th_duration_days">
                        <span t-field="line.duration_days"/>
                    </td>
                    <td t-if="display_discount"
                        t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                        <span class="text-nowrap" t-field="line.discount"/>
                    </td>
                    <td class="text-right o_price_total">
                        <span class="text-nowrap" t-field="line.price_subtotal"
                              groups="account.group_show_line_subtotals_tax_excluded"/>
                        <span class="text-nowrap" t-field="line.price_total"
                              groups="account.group_show_line_subtotals_tax_included"/>
                    </td>
                </t>
            </t>
        </xpath>
        <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_priceunit']" position="replace"/>
        <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_taxes']" position="replace"/>
        <xpath expr="//p[@name='payment_communication']" position="replace">
            <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication">
                Please use the following reference for your payment : <b><span t-field="o.payment_reference"/></b>
            </p>
        </xpath>
        <xpath expr="//p[@name='comment']" position="before">
            <p>
                <b>Bank Details</b>
            </p>
        </xpath>
    </template> -->

    <template id="report_invoice" inherit_id="account.report_invoice">
        <xpath expr='//t[@t-call="account.report_invoice_document"]' position="after">
            <t t-if="o._get_name_invoice_report() == 'ia_sale_report.report_rental_invoice_document'"
               t-call="ia_sale_report.report_rental_invoice_document" t-lang="lang"/>
        </xpath>
    </template>

    <template id="report_invoice_with_payments" inherit_id="account.report_invoice_with_payments">
        <xpath expr='//t[@t-call="account.report_invoice_document"]' position="after">
            <t t-if="o._get_name_invoice_report() == 'ia_sale_report.report_rental_invoice_document'"
               t-call="ia_sale_report.report_rental_invoice_document" t-lang="lang"/>
        </xpath>
    </template>

    <template id="address_layout_inherit" inherit_id="web.address_layout">
        <xpath expr="//div[hasclass('address')]" position="attributes">
            <attribute name="style">font-size: 12px;</attribute>
        </xpath>
    </template>
</odoo>
